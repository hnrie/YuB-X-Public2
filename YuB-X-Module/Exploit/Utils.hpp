#pragma once

#include <Windows.h>
#include <lstate.h>
#include <string>
#include <vector>
#include <lualib.h>

namespace Utils
{
    inline void AddFunction(lua_State* L, const char* Name, lua_CFunction Function)
    {
        lua_pushcclosurek(L, Function, nullptr, 0, nullptr);
        lua_setglobal(L, Name);
    }

    inline void AddTableFunction(lua_State* L, const char* Name, lua_CFunction Function)
    {
        lua_pushcclosurek(L, Function, nullptr, 0, nullptr);
        lua_setfield(L, -2, Name);
    }

    inline bool IsInGame(uintptr_t DataModel)
    {
        uintptr_t GameLoaded = *reinterpret_cast<uintptr_t*>(DataModel + Offsets::DataModel::GameLoaded);
        return GameLoaded == 31;
    }
}
