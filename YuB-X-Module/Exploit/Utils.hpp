#pragma once

#include <Windows.h>
#include <lstate.h>
#include <string>
#include <vector>
#include <lualib.h>

namespace utils
{
    inline void add_function(lua_State* L, const char* name, lua_CFunction function)
    {
        lua_pushcclosure(L, function, nullptr, 0);
        lua_setglobal(L, name);
    }

    inline void add_table_function(lua_State* L, const char* name, lua_CFunction function)
    {
        lua_pushcclosure(L, function, nullptr, 0);
        lua_setfield(L, -2, name);
    }

    inline bool is_in_game(uintptr_t data_model)
    {
        uintptr_t game_loaded = *reinterpret_cast<uintptr_t*>(data_model + offsets::data_model::game_loaded);
        return game_loaded == 31;
    }
}
